<!DOCTYPE HTML>
<html>
    <head>
        <title>Lemonade</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.5/flatly/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js" type="text/javascript"></script>
    </head>

    <body>
        <div class="navbar navbar-default">
            <div class="navbar-header">
                <a href="http://thesheps.github.io/" class="navbar-brand">thesheps.github.io</a>
            </div>
        </div>
        <div class="container">
            <div class="page-header">
                <h1>Lemonade.</h1>
            </div>
            <p>A feature-switching framework which allows you to move your configurations from app.configs to an Sql database or RESTful service.</p>

            <hr>

            <h2>Usage.</h2>
            <p>Lemonade can be drunk in a variety of different ways:</p>

            <br/>

            <h4>Via a standard string index:</h4>
            <pre><code>if(Feature.Switches["MySuperCoolFeature"]) 
{
    // Do some crazy thing.
}</code></pre>

            <br/>

            <h4>Via a dynamic expression index:</h4>
            <pre><code>if(Feature.Switches[d => d.MySuperCoolFeature])
{
    // Do some even crazier thing.
}</code></pre>

            <br/>

            <h4>Encorporated into a "FeatureWrapper":</h4>
            <pre><code>new MySuperCoolFeature().Execute();

public class MySuperCoolFeature : FeatureWrapper
{
    protected override string Key => "UseTestFunctionality";

    protected override void OnExecute()
    {
        // Crazy, crazy functionality.  Totally unsanctioned.
    }
}</code></pre>

            <br/>

            <h4>To suppress/allow an Mvc Action:</h4>
            <pre><code>[Feature("SuperCoolNewFeature")]
public void SuperCoolNewFeature()
{
    // Crazy MVC Action.
}</code></pre>

<br/>

            <h2>Configuration.</h2>
            <p>By default, Lemonade will configure itself to use your application's current web or app.config file.  This can be overridden at composition root:</p>
            <pre><code>public class Program
{
    public static void Main(string[] args)
    {
        Feature.Resolver = new SqlFeatureResolver();

        // Or
        Feature.Resolver = new AppConfigFeatureResolver();

        // Or
        Feature.Resolver = new HttpFeatureResolver();
    }
}</code></pre>

<br/>

            <p>Or via Xml Configuration:</p>
            <pre><strong>SqlFeatureProvider</strong>
<code>&lt?xml version="1.0" encoding="utf-8"?&gt
&ltconfiguration&gt
  &ltconfigSections&gt
    &ltsection name="FeatureConfiguration" type="Lemonade.FeatureConfigurationSection, Lemonade"/&gt
  &lt/configSections&gt

  &ltFeatureConfiguration FeatureResolver="Lemonade.Sql.SqlFeatureResolver"/&gt

  &ltconnectionStrings&gt
    &ltconnectionString name="Lemonade" connectionString="Data Source=blahblahblah" /&gt
  &lt/connectionStrings&gt
&ltconfiguration/&gt</code></pre>

<pre><strong>HttpFeatureProvider</strong>
<code>&lt?xml version="1.0" encoding="utf-8"?&gt
&ltconfiguration&gt
  &ltconfigSections&gt
    &ltsection name="FeatureConfiguration" type="Lemonade.FeatureConfigurationSection, Lemonade"/&gt
  &lt/configSections&gt

  &ltFeatureConfiguration FeatureResolver="Lemonade.Resolvers.HttpFeatureResolver"/&gt

  &ltappSettings&gt
    &ltadd key="LemonadeServiceUrl" value="http://blahblahblah"/&gt
  &lt/appSettings&gt
&ltconfiguration/&gt</code>
</pre>

<p>
    As you may (or may not...) be able to tell from the above examples, convention-based configuration of Lemonade requires
    the resolver to have a parameterless constructor.  All configuration is determined using assumed connection string/appsetting
    keys.
</p>
<br/>
<p><strong>The SqlFeatureResolver</strong> requires a connection string with a name of "Lemonade".</p>
<p><strong>The HttpFeatureResolver</strong> requires an app setting with the key "LemonadeServiceUrl" to target the Lemonade Http service.</p>

<br/>

<h2>Database Schema.</h2>
<p>Lemonade ships with a migration component to restore or drop the schema at will.  This is FluentMigrator-driven, and is supported by a versions table to prevent migrations being run in more than once:</p>
<pre><code>Runner.SqlServer("LemonadeConnectionString").Up()</code></pre>
</div>
    </body>
</html>